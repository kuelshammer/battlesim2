   Compiling simulation-wasm v0.1.0 (/Users/max/Rust/Battlesim2/simulation-wasm)
warning: unused variable: `damage_before_multiplier`
   --> src/resolution.rs:362:21
    |
362 |                 let damage_before_multiplier = damage;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_damage_before_multiplier`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `a`
   --> src/simulation.rs:750:26
    |
750 |         Action::Template(a) => {
    |                          ^ help: if this is intentional, prefix it with an underscore: `_a`

warning: `simulation-wasm` (lib) generated 2 warnings
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 2.22s
     Running `target/debug/examples/run_sim_from_file kaelen_battle.json`
Running simulation with 4 players and 1 encounters...
        Checking usability for Kaelen: Rage. Remaining uses: Some(4.0)
        Getting targets for Kaelen's action: Rage. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Rage.

--- Round START ---
  Turn Order: ["Team1 36.0", "Team1 18.0", "Team1 16.0", "Team2 14.0", "Team1 9.0", "Team2 8.0", "Team2 5.0"]
  Turn for: Andreas (Init: 36.0)
      Getting actions for Andreas. Creature actions: 3
        Considering action: Hunter's Mark (Slot: 1, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Andreas: Hunter's Mark. Remaining uses: Some(3.0)
          Action Hunter's Mark usable. Adding to result.
        Considering action: Hand Crossbow (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow. Remaining uses: None
          Action Hand Crossbow usable. Adding to result.
        Considering action: Hand Crossbow (Crossbow Expert) (Slot: 1, Freq: Static("at will"))
          Slot 1 already used this turn.
      Chose action: Hunter's Mark
        Getting targets for Andreas's action: Hunter's Mark. Allies: 4, Enemies: 3
          Template 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
        Andreas found 1 total targets for action Hunter's Mark.
      Selected 1 targets.
      Chose action: Hand Crossbow
        Getting targets for Andreas's action: Hand Crossbow. Allies: 4, Enemies: 3
          Attack 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
        Andreas found 1 total targets for action Hand Crossbow.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 90.0
  Turn for: Valerius (Init: 18.0)
      Getting actions for Valerius. Creature actions: 1
        Considering action: Dodge (Slot: 0, Freq: Static("at will"))
        Checking usability for Valerius: Dodge. Remaining uses: None
          Action Dodge usable. Adding to result.
      Chose action: Dodge
        Getting targets for Valerius's action: Dodge. Allies: 4, Enemies: 3
          Buff 1/1 of Valerius. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 4. Excluded: []
              Self target selected.
            Target selected for Valerius: Ally Valerius
        Valerius found 1 total targets for action Dodge.
      Selected 1 targets.
  Valerius turn END. Current State: P1 HP: 54.0, P2 HP: 90.0
  Turn for: Van (Init: 16.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(1.0)
          Action Action Surge: Greatsword x2 usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Action Surge: Greatsword x2
        Getting targets for Van's action: Action Surge: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Van: Enemy Erica
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Van: Enemy Erica
        Van found 2 total targets for action Action Surge: Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0
          Cleared concentration and action targets on dead caster: Erica
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Target selected for Van: Enemy Boris
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Target selected for Van: Enemy Boris
        Van found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0
          Cleared concentration and action targets on dead caster: Boris
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 90.0
  Turn for: Erica (Init: 14.0)
    Erica is dead, skipping turn.
  Turn for: Alestair (Init: 9.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(3.0)
          Action Divine Smite usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Divine Smite
        Getting targets for Alestair's action: Divine Smite. Allies: 4, Enemies: 3
          Buff 1/1 of Alestair. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 4. Excluded: []
              Self target selected.
            Target selected for Alestair: Ally Alestair
        Alestair found 1 total targets for action Divine Smite.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
        Alestair found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 57.0
  Turn for: Kaelen (Init: 8.0)
      Getting actions for Kaelen. Creature actions: 4
        Considering action: Rage (Slot: -3, Freq: Limited { reset: "lr", uses: 4 })
        Checking usability for Kaelen: Rage. Remaining uses: Some(3.0)
          Action Rage condition not met.
        Considering action: Reckless Attack (Slot: 5, Freq: Static("at will"))
        Checking usability for Kaelen: Reckless Attack. Remaining uses: None
          Action Reckless Attack usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Kaelen: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Longtooth (Slot: 1, Freq: Static("at will"))
        Checking usability for Kaelen: Longtooth. Remaining uses: None
          Action Longtooth usable. Adding to result.
      Chose action: Reckless Attack
        Getting targets for Kaelen's action: Reckless Attack. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Reckless Attack.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Kaelen's action: Greatsword x2. Allies: 3, Enemies: 4
          Attack 1/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Target selected for Kaelen: Enemy Valerius
          Attack 2/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Target selected for Kaelen: Enemy Valerius
        Kaelen found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 4371996e-e952-489a-abba-be9d495307d6-3-0
          Cleared concentration and action targets on dead caster: Valerius
          Removed buff '854675ae-36eb-4e0c-917b-6b04a01a0220' from Valerius (source 4371996e-e952-489a-abba-be9d495307d6-3-0 is dead)
          Valerius had 1 buffs from dead source, now has 0 buffs total
      Chose action: Longtooth
        Getting targets for Kaelen's action: Longtooth. Allies: 3, Enemies: 4
          Attack 1/1 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
        Kaelen found 1 total targets for action Longtooth.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
  Kaelen turn END. Current State: P1 HP: 54.0, P2 HP: 57.0
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0"}
CLEANUP: Removing buffs from dead sources: {"8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0"}

--- Round START ---
  Turn Order: ["Team1 36.0", "Team1 18.0", "Team1 16.0", "Team2 14.0", "Team1 9.0", "Team2 8.0", "Team2 5.0"]
  Turn for: Andreas (Init: 36.0)
      Getting actions for Andreas. Creature actions: 3
        Considering action: Hunter's Mark (Slot: 1, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Andreas: Hunter's Mark. Remaining uses: Some(2.0)
          Action Hunter's Mark condition not met.
        Considering action: Hand Crossbow (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow. Remaining uses: None
          Action Hand Crossbow usable. Adding to result.
        Considering action: Hand Crossbow (Crossbow Expert) (Slot: 1, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow (Crossbow Expert). Remaining uses: None
          Action Hand Crossbow (Crossbow Expert) usable. Adding to result.
      Chose action: Hand Crossbow
        Getting targets for Andreas's action: Hand Crossbow. Allies: 4, Enemies: 3
          Attack 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
        Andreas found 1 total targets for action Hand Crossbow.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
      Chose action: Hand Crossbow (Crossbow Expert)
        Getting targets for Andreas's action: Hand Crossbow (Crossbow Expert). Allies: 4, Enemies: 3
          Attack 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
        Andreas found 1 total targets for action Hand Crossbow (Crossbow Expert).
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 48.0
  Turn for: Valerius (Init: 18.0)
    Valerius is dead, skipping turn.
  Turn for: Van (Init: 16.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(0.0)
          Action Action Surge: Greatsword x2 not usable.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
        Van found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 35.0
  Turn for: Erica (Init: 14.0)
    Erica is dead, skipping turn.
  Turn for: Alestair (Init: 9.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(2.0)
          Action Divine Smite condition not met.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
        Alestair found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 13.0
  Turn for: Kaelen (Init: 8.0)
      Getting actions for Kaelen. Creature actions: 4
        Considering action: Rage (Slot: -3, Freq: Limited { reset: "lr", uses: 4 })
        Checking usability for Kaelen: Rage. Remaining uses: Some(3.0)
          Action Rage condition not met.
        Considering action: Reckless Attack (Slot: 5, Freq: Static("at will"))
        Checking usability for Kaelen: Reckless Attack. Remaining uses: None
          Action Reckless Attack usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Kaelen: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Longtooth (Slot: 1, Freq: Static("at will"))
        Checking usability for Kaelen: Longtooth. Remaining uses: None
          Action Longtooth usable. Adding to result.
      Chose action: Reckless Attack
        Getting targets for Kaelen's action: Reckless Attack. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Reckless Attack.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Kaelen's action: Greatsword x2. Allies: 3, Enemies: 4
          Attack 1/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
          Attack 2/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
        Kaelen found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
      Chose action: Longtooth
        Getting targets for Kaelen's action: Longtooth. Allies: 3, Enemies: 4
          Attack 1/1 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
        Kaelen found 1 total targets for action Longtooth.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
  Kaelen turn END. Current State: P1 HP: 54.0, P2 HP: 13.0
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0"}
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0"}

--- Round START ---
  Turn Order: ["Team1 36.0", "Team1 18.0", "Team1 16.0", "Team2 14.0", "Team1 9.0", "Team2 8.0", "Team2 5.0"]
  Turn for: Andreas (Init: 36.0)
      Getting actions for Andreas. Creature actions: 3
        Considering action: Hunter's Mark (Slot: 1, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Andreas: Hunter's Mark. Remaining uses: Some(2.0)
          Action Hunter's Mark condition not met.
        Considering action: Hand Crossbow (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow. Remaining uses: None
          Action Hand Crossbow usable. Adding to result.
        Considering action: Hand Crossbow (Crossbow Expert) (Slot: 1, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow (Crossbow Expert). Remaining uses: None
          Action Hand Crossbow (Crossbow Expert) usable. Adding to result.
      Chose action: Hand Crossbow
        Getting targets for Andreas's action: Hand Crossbow. Allies: 4, Enemies: 3
          Attack 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
        Andreas found 1 total targets for action Hand Crossbow.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
      Chose action: Hand Crossbow (Crossbow Expert)
        Getting targets for Andreas's action: Hand Crossbow (Crossbow Expert). Allies: 4, Enemies: 3
          Attack 1/1 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
        Andreas found 1 total targets for action Hand Crossbow (Crossbow Expert).
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 13.0
  Turn for: Valerius (Init: 18.0)
    Valerius is dead, skipping turn.
  Turn for: Van (Init: 16.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(0.0)
          Action Action Surge: Greatsword x2 not usable.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
        Van found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
        [DEBUG] remove_all_buffs_from_source called: Source ID: ee727462-cfe0-452a-bf82-9bdd101e05db-0-0
          Cleared concentration and action targets on dead caster: Kaelen
          Removed buff '9a0d2c76-cef3-472b-89c1-41433860f246' from Kaelen (source ee727462-cfe0-452a-bf82-9bdd101e05db-0-0 is dead)
          Removed buff '7a2f6115-ede5-452d-b38c-b4b0ff192485' from Kaelen (source ee727462-cfe0-452a-bf82-9bdd101e05db-0-0 is dead)
          Kaelen had 2 buffs from dead source, now has 0 buffs total
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 0.0
  Turn for: Erica (Init: 14.0)
    Erica is dead, skipping turn.
  Turn for: Alestair (Init: 9.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(2.0)
          Action Divine Smite condition not met.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            No target found for Alestair's attack 1.
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            No target found for Alestair's attack 2.
        Alestair found 0 total targets for action Greatsword x2.
      Selected 0 targets.
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 0.0
  Turn for: Kaelen (Init: 8.0)
    Kaelen is dead, skipping turn.
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "ee727462-cfe0-452a-bf82-9bdd101e05db-0-0", "4371996e-e952-489a-abba-be9d495307d6-3-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0"}
CLEANUP: Removing buffs from dead sources: {"493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "ee727462-cfe0-452a-bf82-9bdd101e05db-0-0", "4371996e-e952-489a-abba-be9d495307d6-3-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0"}

=== SIMULATION LOGS ===

--- Encounter Start: Players vs Monsters ---

=== Pre-Combat Setup ===
  > Kaelen uses Rage
      -> Casts Rage on Kaelen


=== Round 1 ===
  > Turn: Andreas (HP: 54 of 54)
    - Uses Action: Hunter's Mark
    - Applying template: Hunter's Mark
      Template Hunter's Mark applied to target
    - Uses Action: Hand Crossbow
      -> Attack vs Erica: Rolled 15 + 5 (base bonus) + 0 (buffs) = 20 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 17 (Base) + -0 (Buffs) = 17
  > Turn: Valerius (HP: 20 of 20)
    - Uses Action: Dodge
      -> Casts Dodge on Valerius
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Action Surge: Greatsword x2
      -> Attack vs Erica: Rolled 17 + 10 (base bonus) + 0 (buffs) = 27 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 15 (Base) + -0 (Buffs) = 15
         Erica falls unconscious!
      -> Attack vs Boris: Rolled 14 + 10 (base bonus) + 0 (buffs) = 24 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 16 (Base) + -0 (Buffs) = 16
    - Uses Action: Greatsword x2
      -> Attack vs Boris: Rolled 10 + 10 (base bonus) + 0 (buffs) = 20 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 12 (Base) + -0 (Buffs) = 12
         Boris falls unconscious!
      -> Attack vs Kaelen: Rolled 2 + 10 (base bonus) + 0 (buffs) = 12 vs AC 15 (Base 15 + -0 target buffs). Result: MISS
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Divine Smite
      -> Casts Divine Smite on Alestair
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 18 + 5 (base bonus) + 0 (buffs) = 23 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 25 (Base) + 8 (Buffs) * 0.50 () = 16
      -> Attack vs Kaelen: Rolled 10 + 5 (base bonus) + 0 (buffs) = 15 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 24 (Base) + 10 (Buffs) * 0.50 () = 17
  > Turn: Kaelen (HP: 57 of 90)
    - Uses Action: Reckless Attack
      -> Casts Reckless Attack on Kaelen
    - Uses Action: Greatsword x2
      -> Attack vs Valerius: Rolled 7 + 9 (base bonus) + 0 (buffs) = 16 vs AC 14 (Base 14 + -0 target buffs). Result: HIT
         Damage: 18 (Base) + -0 (Buffs) = 18
      -> Attack vs Valerius: Rolled 10 + 9 (base bonus) + 0 (buffs) = 19 vs AC 14 (Base 14 + -0 target buffs). Result: HIT
         Damage: 15 (Base) + -0 (Buffs) = 15
         Valerius falls unconscious!
    - Uses Action: Longtooth
      -> Attack vs Andreas: Rolled 18 + 9 (base bonus) + 0 (buffs) = 27 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 10 (Base) + -0 (Buffs) = 10

=== Round 2 ===
  > Turn: Andreas (HP: 44 of 54)
    - Uses Action: Hand Crossbow
      -> Attack vs Kaelen: Rolled 8 + 5 (base bonus) + 0 (buffs) = 13 vs AC 15 (Base 15 + -0 target buffs). Result: MISS
    - Uses Action: Hand Crossbow (Crossbow Expert)
      -> Attack vs Kaelen: Rolled 14 + 5 (base bonus) + 0 (buffs) = 19 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 19 (Base) + -0 (Buffs) * 0.50 () = 9
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 19 + 10 (base bonus) + 0 (buffs) = 29 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 15 (Base) + -0 (Buffs) * 0.50 () = 7
      -> Attack vs Kaelen: Rolled 15 + 10 (base bonus) + 0 (buffs) = 25 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 12 (Base) + -0 (Buffs) * 0.50 () = 6
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 15 + 5 (base bonus) + 0 (buffs) = 20 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 23 (Base) + -0 (Buffs) * 0.50 () = 11
      -> Attack vs Kaelen: Rolled 10 + 5 (base bonus) + 0 (buffs) = 15 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 23 (Base) + -0 (Buffs) * 0.50 () = 11
  > Turn: Kaelen (HP: 13 of 90)
    - Uses Action: Reckless Attack
      -> Casts Reckless Attack on Kaelen
    - Uses Action: Greatsword x2
      -> Attack vs Andreas: Rolled 9 + 9 (base bonus) + 0 (buffs) = 18 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 16 (Base) + -0 (Buffs) = 16
      -> Attack vs Andreas: Rolled 15 + 9 (base bonus) + 0 (buffs) = 24 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 12 (Base) + -0 (Buffs) = 12
    - Uses Action: Longtooth
      -> Attack vs Andreas: Rolled 9 + 9 (base bonus) + 0 (buffs) = 18 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 10 (Base) + -0 (Buffs) = 10

=== Round 3 ===
  > Turn: Andreas (HP: 6 of 54)
    - Uses Action: Hand Crossbow
      -> Attack vs Kaelen: Rolled 8 + 5 (base bonus) + 0 (buffs) = 13 vs AC 15 (Base 15 + -0 target buffs). Result: MISS
    - Uses Action: Hand Crossbow (Crossbow Expert)
      -> Attack vs Kaelen: Rolled 4 + 5 (base bonus) + 0 (buffs) = 9 vs AC 15 (Base 15 + -0 target buffs). Result: MISS
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 5 + 10 (base bonus) + 0 (buffs) = 15 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 15 (Base) + -0 (Buffs) * 0.50 () = 7
      -> Attack vs Kaelen: Rolled 18 + 10 (base bonus) + 0 (buffs) = 28 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 14 (Base) + -0 (Buffs) * 0.50 () = 7
         Kaelen falls unconscious!
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Greatsword x2

=== RESULTS ===

Encounter 1: 3 rounds
