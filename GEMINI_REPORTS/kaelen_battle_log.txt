warning: unused variable: `damage_before_multiplier`
   --> src/resolution.rs:362:21
    |
362 |                 let damage_before_multiplier = damage;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_damage_before_multiplier`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: `simulation-wasm` (lib) generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.16s
     Running `target/debug/examples/run_sim_from_file kaelen_battle.json`
Running simulation with 4 players and 1 encounters...
        Checking usability for Kaelen: Rage. Remaining uses: Some(4.0)
        Getting targets for Kaelen's action: Rage. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Rage.

--- Round START ---
  Turn Order: ["Team1 45.0", "Team1 20.0", "Team2 18.0", "Team1 11.0", "Team1 6.0", "Team2 6.0", "Team2 5.0"]
  Turn for: Andreas (Init: 45.0)
      Getting actions for Andreas. Creature actions: 1
        Considering action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Remaining uses: None
          Action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark usable. Adding to result.
      Chose action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
        Getting targets for Andreas's action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Allies: 4, Enemies: 3
          Attack 1/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
          Attack 2/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
          Attack 3/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
        Andreas found 3 total targets for action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark.
      Selected 3 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2)]
            Selected target: Some("Boris")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2), (true, 1)]
            Selected target: Some("Kaelen")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0
          Cleared concentration and action targets on dead caster: Boris
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 79.0
  Turn for: Alestair (Init: 20.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(3.0)
          Action Divine Smite usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Divine Smite
        Getting targets for Alestair's action: Divine Smite. Allies: 4, Enemies: 3
          Buff 1/1 of Alestair. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 4. Excluded: []
              Self target selected.
            Target selected for Alestair: Ally Alestair
        Alestair found 1 total targets for action Divine Smite.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Alestair: Enemy Erica
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Alestair: Enemy Erica
        Alestair found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2)]
            Selected target: Some("Kaelen")
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 61.0
  Turn for: Erica (Init: 18.0)
      Getting actions for Erica. Creature actions: 2
        Considering action: Cure Wounds (Slot: 0, Freq: Limited { reset: "lr", uses: 2 })
        Checking usability for Erica: Cure Wounds. Remaining uses: Some(2.0)
          Action Cure Wounds usable. Adding to result.
        Considering action: Dodge (Slot: 0, Freq: Static("at will"))
          Slot 0 already used this turn.
      Chose action: Cure Wounds
        Getting targets for Erica's action: Cure Wounds. Allies: 3, Enemies: 4
          Heal 1/1 of Erica. Attempting to select target.
            Selecting injured ally target (Strategy: AllyWithLeastHP). Allies available: 3. Excluded: []
              Considering injured ally Kaelen. HP: 61.0/90.0
              Considering injured ally Boris. HP: 0.0/22.0
            Selected injured ally target: Some("Boris")
            Target selected for Erica: Ally Boris
        Erica found 1 total targets for action Cure Wounds.
      Selected 1 targets.
  Erica turn END. Current State: P1 HP: 54.0, P2 HP: 61.0
  Turn for: Valerius (Init: 11.0)
      Getting actions for Valerius. Creature actions: 1
        Considering action: Dodge (Slot: 0, Freq: Static("at will"))
        Checking usability for Valerius: Dodge. Remaining uses: None
          Action Dodge usable. Adding to result.
      Chose action: Dodge
        Getting targets for Valerius's action: Dodge. Allies: 4, Enemies: 3
          Buff 1/1 of Valerius. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 4. Excluded: []
              Self target selected.
            Target selected for Valerius: Ally Valerius
        Valerius found 1 total targets for action Dodge.
      Selected 1 targets.
  Valerius turn END. Current State: P1 HP: 54.0, P2 HP: 61.0
  Turn for: Van (Init: 6.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(1.0)
          Action Action Surge: Greatsword x2 usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Action Surge: Greatsword x2
        Getting targets for Van's action: Action Surge: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Target selected for Van: Enemy Boris
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Target selected for Van: Enemy Boris
        Van found 2 total targets for action Action Surge: Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Boris")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 1)]
            Selected target: Some("Erica")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0
          Cleared concentration and action targets on dead caster: Boris
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Van: Enemy Erica
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Van: Enemy Erica
        Van found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2)]
            Selected target: Some("Kaelen")
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 52.0
  Turn for: Kaelen (Init: 6.0)
      Getting actions for Kaelen. Creature actions: 4
        Considering action: Rage (Slot: -3, Freq: Limited { reset: "lr", uses: 4 })
        Checking usability for Kaelen: Rage. Remaining uses: Some(3.0)
          Action Rage condition not met.
        Considering action: Reckless Attack (Slot: 5, Freq: Static("at will"))
        Checking usability for Kaelen: Reckless Attack. Remaining uses: None
          Action Reckless Attack usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Kaelen: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Longtooth (Slot: 1, Freq: Static("at will"))
        Checking usability for Kaelen: Longtooth. Remaining uses: None
          Action Longtooth usable. Adding to result.
      Chose action: Reckless Attack
        Getting targets for Kaelen's action: Reckless Attack. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Reckless Attack.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Kaelen's action: Greatsword x2. Allies: 3, Enemies: 4
          Attack 1/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Target selected for Kaelen: Enemy Valerius
          Attack 2/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Target selected for Kaelen: Enemy Valerius
        Kaelen found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: [(true, 3)]
            Selected target: Some("Andreas")
      Chose action: Longtooth
        Getting targets for Kaelen's action: Longtooth. Allies: 3, Enemies: 4
          Attack 1/1 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
            Target selected for Kaelen: Enemy Valerius
        Kaelen found 1 total targets for action Longtooth.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Valerius")
        [DEBUG] remove_all_buffs_from_source called: Source ID: 4371996e-e952-489a-abba-be9d495307d6-3-0
          Cleared concentration and action targets on dead caster: Valerius
          Removed buff '854675ae-36eb-4e0c-917b-6b04a01a0220' from Valerius (source 4371996e-e952-489a-abba-be9d495307d6-3-0 is dead)
          Valerius had 1 buffs from dead source, now has 0 buffs total
  Kaelen turn END. Current State: P1 HP: 54.0, P2 HP: 52.0
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0"}
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0"}

--- Round START ---
  Turn Order: ["Team1 45.0", "Team1 20.0", "Team2 18.0", "Team1 11.0", "Team1 6.0", "Team2 6.0", "Team2 5.0"]
  Turn for: Andreas (Init: 45.0)
      Getting actions for Andreas. Creature actions: 1
        Considering action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Remaining uses: None
          Action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark usable. Adding to result.
      Chose action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
        Getting targets for Andreas's action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Allies: 4, Enemies: 3
          Attack 1/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
          Attack 2/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
          Attack 3/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Target selected for Andreas: Enemy Erica
        Andreas found 3 total targets for action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark.
      Selected 3 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Erica")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2)]
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 2), (true, 0)]
        [DEBUG] remove_all_buffs_from_source called: Source ID: 8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0
          Cleared concentration and action targets on dead caster: Erica
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 41.0
  Turn for: Alestair (Init: 20.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(2.0)
          Action Divine Smite condition not met.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
        Alestair found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 0)]
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 26.0
  Turn for: Erica (Init: 18.0)
    Erica is dead, skipping turn.
  Turn for: Valerius (Init: 11.0)
    Valerius is dead, skipping turn.
  Turn for: Van (Init: 6.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(0.0)
          Action Action Surge: Greatsword x2 not usable.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Van: Enemy Kaelen
        Van found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 0)]
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 21.0
  Turn for: Kaelen (Init: 6.0)
      Getting actions for Kaelen. Creature actions: 4
        Considering action: Rage (Slot: -3, Freq: Limited { reset: "lr", uses: 4 })
        Checking usability for Kaelen: Rage. Remaining uses: Some(3.0)
          Action Rage condition not met.
        Considering action: Reckless Attack (Slot: 5, Freq: Static("at will"))
        Checking usability for Kaelen: Reckless Attack. Remaining uses: None
          Action Reckless Attack usable. Adding to result.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Kaelen: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Longtooth (Slot: 1, Freq: Static("at will"))
        Checking usability for Kaelen: Longtooth. Remaining uses: None
          Action Longtooth usable. Adding to result.
      Chose action: Reckless Attack
        Getting targets for Kaelen's action: Reckless Attack. Allies: 3, Enemies: 4
          Buff 1/1 of Kaelen. Attempting to select target.
            Selecting ally target (Strategy: Self_). Allies available: 3. Excluded: []
              Self target selected.
            Target selected for Kaelen: Ally Kaelen
        Kaelen found 1 total targets for action Reckless Attack.
      Selected 1 targets.
      Chose action: Greatsword x2
        Getting targets for Kaelen's action: Greatsword x2. Allies: 3, Enemies: 4
          Attack 1/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
          Attack 2/2 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
        Kaelen found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: [(true, 2)]
            Selected target: Some("Alestair")
      Chose action: Longtooth
        Getting targets for Kaelen's action: Longtooth. Allies: 3, Enemies: 4
          Attack 1/1 of Kaelen. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
            Target selected for Kaelen: Enemy Andreas
        Kaelen found 1 total targets for action Longtooth.
      Selected 1 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 4. Excluded: []
            Selected target: Some("Andreas")
  Kaelen turn END. Current State: P1 HP: 54.0, P2 HP: 21.0
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "4371996e-e952-489a-abba-be9d495307d6-3-0"}
CLEANUP: Removing buffs from dead sources: {"493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "4371996e-e952-489a-abba-be9d495307d6-3-0"}

--- Round START ---
  Turn Order: ["Team1 45.0", "Team1 20.0", "Team2 18.0", "Team1 11.0", "Team1 6.0", "Team2 6.0", "Team2 5.0"]
  Turn for: Andreas (Init: 45.0)
      Getting actions for Andreas. Creature actions: 1
        Considering action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark (Slot: 0, Freq: Static("at will"))
        Checking usability for Andreas: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Remaining uses: None
          Action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark usable. Adding to result.
      Chose action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
        Getting targets for Andreas's action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark. Allies: 4, Enemies: 3
          Attack 1/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
          Attack 2/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
          Attack 3/3 of Andreas. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Andreas: Enemy Kaelen
        Andreas found 3 total targets for action Hand Crossbow x2 + Crossbow Expert + Hunter's Mark.
      Selected 3 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 0)]
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 0)]
  Andreas turn END. Current State: P1 HP: 54.0, P2 HP: 6.0
  Turn for: Alestair (Init: 20.0)
      Getting actions for Alestair. Creature actions: 3
        Considering action: Divine Smite (Slot: 5, Freq: Limited { reset: "lr", uses: 3 })
        Checking usability for Alestair: Divine Smite. Remaining uses: Some(2.0)
          Action Divine Smite condition not met.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Alestair: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Lay on Hands (Slot: 0, Freq: Static("1/day"))
          Slot 0 already used this turn.
      Chose action: Greatsword x2
        Getting targets for Alestair's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
          Attack 2/2 of Alestair. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Target selected for Alestair: Enemy Kaelen
        Alestair found 2 total targets for action Greatsword x2.
      Selected 2 targets.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            Selected target: Some("Kaelen")
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: [(true, 0)]
        [DEBUG] remove_all_buffs_from_source called: Source ID: ee727462-cfe0-452a-bf82-9bdd101e05db-0-0
          Cleared concentration and action targets on dead caster: Kaelen
          Removed buff '9a0d2c76-cef3-472b-89c1-41433860f246' from Kaelen (source ee727462-cfe0-452a-bf82-9bdd101e05db-0-0 is dead)
          Removed buff '7a2f6115-ede5-452d-b38c-b4b0ff192485' from Kaelen (source ee727462-cfe0-452a-bf82-9bdd101e05db-0-0 is dead)
          Kaelen had 2 buffs from dead source, now has 0 buffs total
  Alestair turn END. Current State: P1 HP: 54.0, P2 HP: 0.0
  Turn for: Erica (Init: 18.0)
    Erica is dead, skipping turn.
  Turn for: Valerius (Init: 11.0)
    Valerius is dead, skipping turn.
  Turn for: Van (Init: 6.0)
      Getting actions for Van. Creature actions: 3
        Considering action: Action Surge: Greatsword x2 (Slot: 5, Freq: Static("1/fight"))
        Checking usability for Van: Action Surge: Greatsword x2. Remaining uses: Some(0.0)
          Action Action Surge: Greatsword x2 not usable.
        Considering action: Greatsword x2 (Slot: 0, Freq: Static("at will"))
        Checking usability for Van: Greatsword x2. Remaining uses: None
          Action Greatsword x2 usable. Adding to result.
        Considering action: Second Wind (Slot: 1, Freq: Static("1/fight"))
        Checking usability for Van: Second Wind. Remaining uses: Some(1.0)
          Action Second Wind condition not met.
      Chose action: Greatsword x2
        Getting targets for Van's action: Greatsword x2. Allies: 4, Enemies: 3
          Attack 1/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            No target found for Van's attack 1.
          Attack 2/2 of Van. Attempting to select target.
            Selecting enemy target (Strategy: EnemyWithLeastHP). Enemies available: 3. Excluded: []
            No target found for Van's attack 2.
        Van found 0 total targets for action Greatsword x2.
      Selected 0 targets.
  Van turn END. Current State: P1 HP: 54.0, P2 HP: 0.0
  Turn for: Kaelen (Init: 6.0)
    Kaelen is dead, skipping turn.
  Turn for: Boris (Init: 5.0)
    Boris is dead, skipping turn.
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "ee727462-cfe0-452a-bf82-9bdd101e05db-0-0"}
CLEANUP: Removing buffs from dead sources: {"4371996e-e952-489a-abba-be9d495307d6-3-0", "8c731fce-c353-4cb9-b1fb-fed5e5ea16be-2-0", "493f9da5-92ec-45da-b5bd-4a04fa8452df-1-0", "ee727462-cfe0-452a-bf82-9bdd101e05db-0-0"}

=== SIMULATION LOGS ===

--- Encounter Start: Players vs Monsters ---

=== Pre-Combat Setup ===
  > Kaelen uses Rage
      -> Casts Rage on Kaelen


=== Round 1 ===
  > Turn: Andreas (HP: 54 of 54)
    - Uses Action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
      -> Attack vs Erica: Rolled 5 + 5 (base bonus) + 0 (buffs) = 10 vs AC 18 (Base 18 + -0 target buffs). Result: MISS
      -> Attack vs Boris: Rolled 20 + 5 (base bonus) + 0 (buffs) = 25 vs AC 18 (Base 18 + -0 target buffs) (CRIT!). Result: HIT
         Damage: 28 (Base) + -0 (Buffs) = 28
         Boris falls unconscious!
      -> Attack vs Kaelen: Rolled 20 + 5 (base bonus) + 0 (buffs) = 25 vs AC 15 (Base 15 + -0 target buffs) (CRIT!). Result: HIT
         Damage: 23 (Base) + -0 (Buffs) * 0.50 () = 11
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Divine Smite
      -> Casts Divine Smite on Alestair
    - Uses Action: Greatsword x2
      -> Attack vs Erica: Rolled 10 + 5 (base bonus) + 0 (buffs) = 15 vs AC 18 (Base 18 + -0 target buffs). Result: MISS
      -> Attack vs Kaelen: Rolled 10 + 5 (base bonus) + 0 (buffs) = 15 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 29 (Base) + 8 (Buffs) * 0.50 () = 18
  > Turn: Erica (HP: 22 of 22)
    - Uses Action: Cure Wounds
      -> Heals Boris for 6 HP (was at 0/22)
  > Turn: Valerius (HP: 20 of 20)
    - Uses Action: Dodge
      -> Casts Dodge on Valerius
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Action Surge: Greatsword x2
      -> Attack vs Boris: Rolled 20 + 10 (base bonus) + 0 (buffs) = 30 vs AC 18 (Base 18 + -0 target buffs) (CRIT!). Result: HIT
         Damage: 22 (Base) + -0 (Buffs) = 22
         Boris falls unconscious!
      -> Attack vs Erica: Rolled 1 + 10 (base bonus) + 0 (buffs) = 11 vs AC 18 (Base 18 + -0 target buffs) (MISS!). Result: MISS
    - Uses Action: Greatsword x2
      -> Attack vs Erica: Rolled 5 + 10 (base bonus) + 0 (buffs) = 15 vs AC 18 (Base 18 + -0 target buffs). Result: MISS
      -> Attack vs Kaelen: Rolled 6 + 10 (base bonus) + 0 (buffs) = 16 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 18 (Base) + -0 (Buffs) * 0.50 () = 9
  > Turn: Kaelen (HP: 52 of 90)
    - Uses Action: Reckless Attack
      -> Casts Reckless Attack on Kaelen
    - Uses Action: Greatsword x2
      -> Attack vs Valerius: Rolled 18 + 9 (base bonus) + 0 (buffs) = 27 vs AC 14 (Base 14 + -0 target buffs). Result: HIT
         Damage: 19 (Base) + -0 (Buffs) = 19
      -> Attack vs Andreas: Rolled 12 + 9 (base bonus) + 0 (buffs) = 21 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 10 (Base) + -0 (Buffs) = 10
    - Uses Action: Longtooth
      -> Attack vs Valerius: Rolled 12 + 9 (base bonus) + 0 (buffs) = 21 vs AC 14 (Base 14 + -0 target buffs). Result: HIT
         Damage: 7 (Base) + -0 (Buffs) = 7
         Valerius falls unconscious!

=== Round 2 ===
  > Turn: Andreas (HP: 44 of 54)
    - Uses Action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
      -> Attack vs Erica: Rolled 17 + 5 (base bonus) + 0 (buffs) = 22 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 22 (Base) + -0 (Buffs) = 22
         Erica falls unconscious!
      -> Attack vs Kaelen: Rolled 17 + 5 (base bonus) + 0 (buffs) = 22 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 23 (Base) + -0 (Buffs) * 0.50 () = 11
      -> No targets available for attack
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 13 + 5 (base bonus) + 0 (buffs) = 18 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 30 (Base) + -0 (Buffs) * 0.50 () = 15
      -> No targets available for attack
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 11 + 10 (base bonus) + 0 (buffs) = 21 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 10 (Base) + -0 (Buffs) * 0.50 () = 5
      -> No targets available for attack
  > Turn: Kaelen (HP: 21 of 90)
    - Uses Action: Reckless Attack
      -> Casts Reckless Attack on Kaelen
    - Uses Action: Greatsword x2
      -> Attack vs Andreas: Rolled 19 + 9 (base bonus) + 0 (buffs) = 28 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 12 (Base) + -0 (Buffs) = 12
      -> Attack vs Alestair: Rolled 5 + 9 (base bonus) + 0 (buffs) = 14 vs AC 20 (Base 20 + -0 target buffs). Result: MISS
    - Uses Action: Longtooth
      -> Attack vs Andreas: Rolled 9 + 9 (base bonus) + 0 (buffs) = 18 vs AC 18 (Base 18 + -0 target buffs). Result: HIT
         Damage: 7 (Base) + -0 (Buffs) = 7

=== Round 3 ===
  > Turn: Andreas (HP: 25 of 54)
    - Uses Action: Hand Crossbow x2 + Crossbow Expert + Hunter's Mark
      -> Attack vs Kaelen: Rolled 20 + 5 (base bonus) + 0 (buffs) = 25 vs AC 15 (Base 15 + -0 target buffs) (CRIT!). Result: HIT
         Damage: 31 (Base) + -0 (Buffs) * 0.50 () = 15
      -> No targets available for attack
      -> No targets available for attack
  > Turn: Alestair (HP: 54 of 54)
    - Uses Action: Greatsword x2
      -> Attack vs Kaelen: Rolled 13 + 5 (base bonus) + 0 (buffs) = 18 vs AC 15 (Base 15 + -0 target buffs). Result: HIT
         Damage: 26 (Base) + -0 (Buffs) * 0.50 () = 13
         Kaelen falls unconscious!
      -> No targets available for attack
  > Turn: Van (HP: 54 of 54)
    - Uses Action: Greatsword x2

=== RESULTS ===

Encounter 1: 3 rounds
