{"id":"Battlesim2-0wp","title":"Interactive User Onboarding","description":"## Overview\nBuild interactive onboarding flow for first-time users: guided tour, tooltips, contextual help panels, and loadable example encounters.\n\n## Why This Matters\n- Reduce time-to-value: New users understand app within 2 minutes\n- Lower support burden: Common \"how do I...\" questions answered inline\n- Showcase features: Tour reveals hidden capabilities (auto-balancer, deciles)\n- Professional polish: Good onboarding signals quality product\n\n## Implementation Plan\n\n### Phase 1: Example Encounters\nCreate `src/data/examples/` with pre-built scenarios\n\nInclude 3 examples:\n1. Goblin Ambush (Level 1, simple)\n2. Orc Raid (Level 3, mixed melee/ranged)\n3. Dragon Encounter (Level 10, complex AOE, legendary actions)\n\n### Phase 2: Tour Framework\nUse react-joyride or build custom tour with 4-6 steps covering encounter builder, simulation controls, decile chart, event log\n\n### Phase 3: Persistent State\nTrack if user has seen tour in localStorage\n\n### Phase 4: Empty State Helpers\nAdd helpful messages when state is empty with actionable \"Load Example\" buttons\n\n### Phase 5: Contextual Tooltips\nUse @radix-ui/react-tooltip for contextual help\n\n## Success Criteria\n- 3 example encounters loadable from UI\n- 4-step tour runs automatically on first visit\n- Tour is dismissible and re-runnable from help menu\n- Empty states show actionable next steps\n- Tour persists state (does not show again once dismissed)\n- Mobile-responsive (tour adapts to small screens)\n\n## Notes\n- Keep tour short (4-6 steps max)\n- Consider \"quick start\" button that loads example and runs sim immediately\n- A/B test tour completion rate if possible","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-27T19:48:39.398225+01:00","updated_at":"2025-12-27T20:09:14.083209+01:00"}
{"id":"Battlesim2-191","title":"Expose AI Decision Trace in Logs","description":"Include the AI's internal scoring matrix in ActionStarted events to make decision logic transparent.","design":"# Implementation Plan\n\n## Proposed Changes\n\n### [Backend] simulation-wasm\n\n#### [MODIFY] execution.rs\n- Update `select_actions_for_combatant` to return both selected actions and a `HashMap\u003cString, f64\u003e` \"decision trace\" containing scores of all evaluated actions.\n- Update `execute_combatant_turn` to handle the trace.\n- Update `execute_action_with_reactions` to accept an optional `decision_trace`.\n- Pass the trace to `Event::ActionStarted`.\n\n#### [MODIFY] events.rs\n- Update `Event::format_for_log` to display the `decision_trace` in the CLI output.\n\n### [Frontend] TypeScript / React\n\n#### [MODIFY] model.ts\n- Update `EventSchema` for `ActionStarted` to include `decision_trace: Record\u003cstring, number\u003e`.\n\n#### [MODIFY] logFormatter.ts\n- Update `LogFormatter.toDetails` to handle `ActionStarted` events and format the `decision_trace`.\n\n#### [MODIFY] EventLog.tsx\n- Ensure `ActionStarted` events are marked as `hasDetails` if a `decision_trace` is present.\n\n## Verification Plan\n- **Automated**: Run `cargo test` and add a test case for trace population.\n- **Manual**: Verify CLI output and UI breakdown.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T07:13:08.066028+01:00","updated_at":"2025-12-27T10:32:13.991742+01:00","closed_at":"2025-12-27T10:32:13.991742+01:00","close_reason":"Closed","labels":["backend","frontend"]}
{"id":"Battlesim2-1h0","title":"Project Migration: Conductor to Beads","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-26T18:29:39.868231+01:00","updated_at":"2025-12-26T23:45:14.414414+01:00","closed_at":"2025-12-26T23:45:14.414414+01:00","close_reason":"All sub-tasks (cleanup, frontend polish, and backend diagnostics) are complete. Project is now fully powered by Beads.","labels":["tech-debt"]}
{"id":"Battlesim2-1rv","title":"Implement Multi-Run Tail Auditing","description":"Extend the auditor to verify 10 random runs from the 2511-batch to ensure compliance in edge cases.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T07:13:02.883898+01:00","updated_at":"2025-12-27T07:16:30.162305+01:00","closed_at":"2025-12-27T07:16:30.162305+01:00","close_reason":"Implemented multi-run auditing with 'batch-log' command and updated scripts.","labels":["backend","quality"]}
{"id":"Battlesim2-1ub","title":"Delete deprecated Conductor tracking files","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:29:45.058632+01:00","updated_at":"2025-12-26T18:30:56.036314+01:00","closed_at":"2025-12-26T18:30:56.036314+01:00","close_reason":"Conductor tracking files removed.","labels":["tech-debt"],"dependencies":[{"issue_id":"Battlesim2-1ub","depends_on_id":"Battlesim2-1h0","type":"parent-child","created_at":"2025-12-26T18:30:40.544373+01:00","created_by":"daemon"}]}
{"id":"Battlesim2-2ll","title":"Implement Rule Auditor for 5e Compliance","description":"A script to validate JSON logs against 5e Action Economy, Concentration, and Resource constraints.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T23:48:22.494485+01:00","updated_at":"2025-12-26T23:49:34.660371+01:00","closed_at":"2025-12-26T23:49:34.660371+01:00","close_reason":"Implemented Rule Auditor with checks for Action Economy, Reaction limits, and Concentration cleanup on death.","labels":["backend","quality"]}
{"id":"Battlesim2-61w","title":"Fix Rust/WASM compilation warnings","description":"Fix Rust compiler warnings in simulation-wasm:\n\n- Remove unused imports (Encounter, HashMap, IntensityTier, etc.)\n- Fix unused variables (_players, _report, mut variables that don't need mut)\n- Clean up warnings in tests/decile_test.rs and tests/reliability_tests.rs\n\nRun `cargo clippy` and `cargo test` to verify all warnings are resolved.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T10:37:38.273239+01:00","updated_at":"2025-12-27T11:04:59.357853+01:00","closed_at":"2025-12-27T11:04:59.357853+01:00","close_reason":"Closed"}
{"id":"Battlesim2-ciz","title":"Simulation Regression Snapshots","description":"## Overview\nImplement regression testing using \"known good\" simulation snapshots. CI compares new runs against stored snapshots to detect behavior changes.\n\n## Why This Matters\n- **Catch logic regressions**: Silent behavior changes break simulation accuracy\n- **D\u0026D 5e correctness**: Rules are complex‚Äîsnapshots ensure we don't accidentally break mechanics\n- **Refactoring safety**: Change implementation confidently if snapshots match\n- **Living documentation**: Snapshots show exact expected behavior\n\n## Implementation Plan\n\n### Phase 1: Snapshot Storage\nCreate `simulation-wasm/tests/snapshots/` directory:\n\n```\nsnapshots/\n‚îú‚îÄ‚îÄ basic_melee Combat.json\n‚îú‚îÄ‚îÄ fireball_aoe.json\n‚îú‚îÄ‚îÄ healing_word.json\n‚îú‚îÄ‚îÄ concentration_break.json\n‚îî‚îÄ‚îÄ opportunity_attack.json\n```\n\nEach snapshot contains:\n```json\n{\n  \"scenario\": \"basic_melee_combat\",\n  \"seed\": 42,\n  \"timestamp\": \"2025-12-27T10:00:00Z\",\n  \"result\": {\n    \"total_rounds\": 4,\n    \"winner\": \"team1\",\n    \"final_hp\": { \"player1\": 38, \"enemy1\": 0 },\n    \"events\": [\n      { \"type\": \"AttackHit\", \"damage\": 12.0, ... },\n      ...\n    ]\n  }\n}\n```\n\n### Phase 2: Snapshot Test Runner\n\nCreate `simulation-wasm/tests/snapshot_test.rs`:\n\n```rust\n#[test]\nfn test_snapshots_match() {\n    let snapshot_files = fs::read_dir(\"tests/snapshots/\").unwrap();\n    \n    for file in snapshot_files {\n        let snapshot: Snapshot = serde_json::from_str(\u0026fs::read_to_string(file.path())?)?;\n        let scenario = load_scenario(\u0026snapshot.scenario)?;\n        \n        // Run simulation with fixed seed\n        let result = execute_scenario(scenario, snapshot.seed);\n        \n        // Compare against snapshot\n        assert_eq!(result.total_rounds, snapshot.result.total_rounds);\n        assert_eq!(result.events, snapshot.result.events);\n    }\n}\n```\n\n### Phase 3: Inline Snapshot Macro (Optional)\nUse `insta` crate for inline snapshots:\n\n```rust\n#[test]\nfn test_basic_combat() {\n    let result = execute_scenario(basic_scenario());\n    insta::assert_json_snapshot!(result);\n}\n```\n\n### Phase 4: CI Integration\n```yaml\n# .github/workflows/test.yml\n- name: Run snapshot tests\n  run: cargo test --snapshot\n  env:\n    UPDATE_SNAPSHOTS: false\n```\n\n## Success Criteria\n- ‚úÖ 5 baseline snapshots captured (melee, AOE, healing, concentration, reaction)\n- ‚úÖ Tests fail when simulation logic changes\n- ‚úÖ `UPDATE_SNAPSHOTS=1` updates snapshots for verified changes\n- ‚úÖ CI runs snapshot tests in \u003c 1 minute\n- ‚úÖ Snapshot review required for updates (manual step)\n\n## Notes\n- Snapshots should be version-controlled (commit alongside code)\n- Use deterministic RNG (seeded) for reproducibility\n- Consider ignoring non-critical fields (timestamps, random roll order)\n- `insta` crate provides CLI: `cargo install insta` and `cargo insta review`\n- May want to snapshot ONLY final state, not full event sequence (less fragile)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-27T19:48:35.576986+01:00","updated_at":"2025-12-27T20:08:51.666891+01:00"}
{"id":"Battlesim2-d3w","title":"Avant-Garde Visual Refactor: The Grimoire Log","description":"Redesign the EventLog using bespoke typography and asymmetric layouts to move away from generic material UI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T07:13:13.24283+01:00","updated_at":"2025-12-27T19:35:06.008535+01:00","closed_at":"2025-12-27T19:35:06.008535+01:00","close_reason":"Closed","labels":["design","frontend"]}
{"id":"Battlesim2-dxt","title":"Improve test coverage in simulation-wasm","description":"Review and improve test coverage:\n\n1. Run cargo tarpaulin or similar tool to measure coverage\n2. Identify modules with low test coverage\n3. Add tests for uncovered code paths\n4. Focus on core modules: execution.rs, events.rs, action_resolver.rs\n5. Add edge case tests (empty inputs, boundary conditions, error paths)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T10:38:22.40063+01:00","updated_at":"2025-12-27T19:18:20.638759+01:00","closed_at":"2025-12-27T19:18:20.638759+01:00","close_reason":"Closed"}
{"id":"Battlesim2-fzh","title":"Optimize LogFormatter.ts for better roll breakdown","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:29:50.242214+01:00","updated_at":"2025-12-26T22:43:25.55263+01:00","closed_at":"2025-12-26T22:43:25.55263+01:00","close_reason":"Optimized mathematical breakdown for all roll types.","labels":["frontend"],"dependencies":[{"issue_id":"Battlesim2-fzh","depends_on_id":"Battlesim2-1h0","type":"parent-child","created_at":"2025-12-26T18:30:45.705946+01:00","created_by":"daemon"}]}
{"id":"Battlesim2-g4u","title":"Resolve Rust Compilation Warnings","description":"Identify and fix various compilation warnings in the simulation-wasm Rust codebase, including unused imports, unused variables, and naming convention issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T09:55:20.788439+01:00","updated_at":"2025-12-27T10:17:21.438017+01:00","closed_at":"2025-12-27T10:17:21.438017+01:00","close_reason":"Closed"}
{"id":"Battlesim2-ipd","title":"Property-Based Testing for Simulation Invariants","description":"## Overview\nImplement property-based testing using `proptest` to validate simulation invariants across thousands of randomly generated inputs.\n\n## Why This Matters\n- **Emergent bug detection**: Finds edge cases unit tests miss\n- **Invariant verification**: Ensures fundamental rules never break (no negative HP, damage conservation, resource limits)\n- **Refactoring safety**: Change code with confidence tests catch regressions\n- **Confidence in simulation**: D\u0026D 5e rules are complex‚ÄîPBT provides mathematical confidence\n\n## Implementation Plan\n\n### Phase 1: Core Invariants\nCreate `simulation-wasm/tests/properties/` directory:\n\n1. **HP Invariant** (never negative):\n   ```rust\n   proptest! {\n       #[test]\n       fn test_hp_never_negative(\n           player_hp in 1..500,\n           monster_damage in 0..100,\n           rounds in 1..20\n       ) {\n           // Run simulation, assert no HP \u003c 0\n       }\n   }\n   ```\n\n2. **Damage Conservation** (damage dealt = damage taken):\n   ```rust\n   proptest! {\n       #[test]\n           // Sum all DamageTaken events = sum all HP lost\n       }\n   }\n   ```\n\n3. **Resource Limits** (spell slots, actions bounded):\n   ```rust\n   proptest! {\n       #[test]\n           // Spell slots used ‚â§ spell slots available\n           // Actions per turn ‚â§ 1 (unless special features)\n       }\n   }\n   ```\n\n### Phase 2: Add proptest dependency\n```toml\n[dev-dependencies]\nproptest = \"1.4\"\n```\n\n### Phase 3: Fuzzing Strategy\n- Random creatures: HP 1-500, AC 5-25, attack bonus 0-15\n- Random actions: damage dice, AOE radius, save DC\n- Random configurations: 1-10 combatants, 1-50 rounds\n\n## Success Criteria\n- ‚úÖ All 3 core invariants pass 10,000 random test cases\n- ‚úÖ Shrinking finds minimal counterexample for any failure\n- ‚úÖ CI runs proptest in \u003c 2 minutes\n- ‚úÖ Failing test seeds are reproducible\n\n## Notes\n- Start with HP invariant‚Äîsimplest, highest value\n- Use `prop_assert_eq!` for better failure messages\n- Consider `proptest-derive` for custom strategies (Creature generation)\n- May need to stub random dice rolls for reproducibility (use seeded RNG)","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-27T19:48:23.461282+01:00","updated_at":"2025-12-27T21:05:10.779206+01:00"}
{"id":"Battlesim2-ond","title":"Performance Profiling Dashboard","description":"## Overview\nBuild performance profiling dashboard for real-time simulation progress, bottleneck identification, and WASM bundle size tracking.\n\n## Why This Matters\n- **Optimization visibility**: Identify slow functions before users notice lag\n- **WASM size awareness**: Larger bundles = longer load times, higher bounce\n- **Performance regression**: Detect when new code slows down simulations\n- **Debugging aid**: Profile shows exactly where time is spent\n\n## Implementation Plan\n\n### Phase 1: Rust Performance Instrumentation\n\nAdd `log` calls with timing in hot paths:\n\n```rust\n// simulation-wasm/src/execution.rs\nuse std::time::Instant;\n\npub fn execute_encounter(\u0026mut self) -\u003e EncounterResult {\n    let start = Instant::now();\n    \n    for round in 0..100 {\n        let round_start = Instant::now();\n        self.execute_round(round);\n        log::info!(\"Round {} took {:?}\", round, round_start.elapsed());\n    }\n    \n    log::info!(\"Total simulation time: {:?}\", start.elapsed());\n    result\n}\n```\n\nEnable `log` and `console_log` in WASM:\n\n```toml\n[dependencies]\nlog = \"0.4\"\nconsole_log = \"1.0\"\n```\n\n```rust\n// simulation-wasm/src/lib.rs\nfn init_logging() {\n    console_log::init_with_level(log::Level::Info).unwrap();\n}\n```\n\n### Phase 2: Performance Dashboard UI\n\nCreate `src/components/debug/PerformanceDashboard.tsx`:\n\n```typescript\ninterface PerfMetrics {\n  lastSimulationTime: number;\n  averageRoundTime: number;\n  slowestRound: number;\n  wasmSize: number;\n  memoryUsage: number;\n}\n\nconst PerformanceDashboard: FC = () =\u003e {\n  const [metrics, setMetrics] = useState\u003cPerfMetrics | null\u003e(null);\n  \n  useEffect(() =\u003e {\n    // Listen for custom performance events\n    const listener = (e: CustomEvent\u003cPerfMetrics\u003e) =\u003e {\n      setMetrics(e.detail);\n    };\n    window.addEventListener('simulationComplete', listener);\n    \n    // Fetch WASM size\n    fetch('/pkg/simulation_wasm_bg.wasm')\n      .then(r =\u003e r.blob())\n      .then(blob =\u003e setMetrics(prev =\u003e ({ ...prev, wasmSize: blob.size })));\n    \n    return () =\u003e window.removeEventListener('simulationComplete', listener);\n  }, []);\n  \n  return (\n    \u003cdiv className={styles.dashboard}\u003e\n      \u003ch4\u003ePerformance\u003c/h4\u003e\n      \u003cdiv\u003eLast sim: {metrics?.lastSimulationTime}ms\u003c/div\u003e\n      \u003cdiv\u003eAvg round: {metrics?.averageRoundTime}ms\u003c/div\u003e\n      \u003cdiv\u003eWASM: {formatBytes(metrics?.wasmSize)}\u003c/div\u003e\n      \u003cdiv\u003eMemory: {formatBytes(metrics?.memoryUsage)}\u003c/div\u003e\n      \n      {/* Bar chart of round times */}\n      \u003cdiv className={styles.roundChart}\u003e\n        {roundTimes.map((time, i) =\u003e (\n          \u003cdiv key={i} style={{ height: `${time / maxTime * 100}%` }} /\u003e\n        ))}\n      \u003c/div\u003e\n    \u003c/div\u003e\n  );\n};\n```\n\n### Phase 3: WASM Size Tracking\n\nAdd bundle size to dashboard:\n\n```bash\n# scripts/check-wasm-size.sh\n#!/bin/bash\nWASM_SIZE=\necho \"WASM size: \"\n\n# Alert if \u003e 1MB\nif [  -gt 1048576 ]; then\n  echo \"‚ö†Ô∏è  WASM is \u003e 1MB, consider code splitting\"\nfi\n```\n\n### Phase 4: Flame Graph (Optional)\nUse `flamegraph` crate for Rust profiling:\n\n```bash\ncargo install flamegraph\ncargo flamegraph --bin sim_cli\n```\n\n## Success Criteria\n- ‚úÖ Dashboard shows simulation time, round times, WASM size\n- ‚úÖ Visual chart of per-round performance\n- ‚úÖ WASM size alerts when \u003e 1MB\n- ‚úÖ Performance logs appear in browser console\n- ‚úÖ Dashboard toggles on/off (dev mode only)\n\n## Notes\n- Only enable in dev builds (use `#[cfg(debug_assertions)]`)\n- Consider using `web-sys` Performance API for browser-side timing\n- WASM size grows with dependency additions‚Äîmonitor regularly\n- Round-by-round breakdown helps identify slow actions (e.g., complex AOE)\n- Could export metrics to CSV for analysis in external tools","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-27T19:48:43.771547+01:00","updated_at":"2025-12-27T20:08:59.610676+01:00"}
{"id":"Battlesim2-rem","title":"Pre-commit Quality Gate","description":"## Overview\nSet up pre-commit hooks to enforce code quality: cargo-clippy, cargo-audit, ESLint, Prettier, WASM size tracking, and test coverage thresholds.\n\n## Why This Matters\n- **Catch issues early**: Failing hooks prevent broken code from being committed\n- **Consistent style**: Prettier ensures uniform formatting across all files\n- **Security scanning**: cargo-audit catches vulnerable dependencies\n- **WASM bloat prevention**: Alert when .wasm file grows \u003e 10%\n- **Coverage awareness**: Reject commits that lower test coverage\n\n## Implementation Plan\n\n### Phase 1: Install Husky\n```bash\nnpm install -D husky\nnpm pkg set scripts.prepare=\"husky\"\nnpx husky install\n```\n\n### Phase 2: Create Hooks\n\n#### `.husky/pre-commit`\n```bash\n#!/bin/bash\nset -e\n\necho \"üîç Running Rust checks...\"\ncd simulation-wasm\ncargo clippy -- -D warnings\ncargo audit\ncd ..\n\necho \"üîç Running TypeScript checks...\"\nnpx eslint src/ --ext .ts,.tsx\nnpx prettier --check \"src/**/*.{ts,tsx,scss}\"\n\necho \"üîç Checking WASM size...\"\nWASM_SIZE=stat -f%z simulation-wasm/pkg/*.wasm 2\u003e/dev/null || stat -c%s simulation-wasm/pkg/*.wasm\nBASELINE_SIZE=500000  # 500KB baseline\nif [ $WASM_SIZE -gt $((BASELINE_SIZE * 11 / 10)) ]; then\n  echo \"‚ùå WASM grew \u003e 10% from baseline\"\n  exit 1\nfi\n\necho \"üîç Running tests...\"\ncd simulation-wasm\ncargo test --quiet\ncd ..\nnpx jest --passWithNoTests\n\necho \"‚úÖ All checks passed!\"\n```\n\n### Phase 3: Configure Tools\n\n#### `.eslintrc.json` (if missing)\n```json\n{\n  \"extends\": [\"next/core-web-vitals\", \"prettier\"],\n  \"rules\": {\n    \"@typescript-eslint/no-unused-vars\": \"error\",\n    \"no-console\": [\"warn\", { \"allow\": [\"error\", \"warn\"] }]\n  }\n}\n```\n\n#### `.prettierrc`\n```json\n{\n  \"semi\": false,\n  \"singleQuote\": true,\n  \"trailingComma\": \"es5\"\n}\n```\n\n### Phase 4: Optional Commit-msg Hook\n```bash\n#!/bin/bash\n# Enforce conventional commits: feat:, fix:, docs:, etc.\nmsg=$(head -n1 $1)\nif ! echo \"$msg\" | grep -qE '^(feat|fix|docs|style|refactor|test|chore|ci)(\\(.+\\))?: '; then\n  echo \"‚ùå Use conventional commit format: feat:, fix:, docs:, etc.\"\n  exit 1\nfi\n```\n\n## Success Criteria\n- ‚úÖ Committing without running cargo-clippy fails hook\n- ‚úÖ Prettier formats code before commit (or blocks on format mismatch)\n- ‚úÖ WASM size \u003e 10% growth blocks commit\n- ‚úÖ cargo-audit fails on vulnerable deps\n- ‚úÖ All hooks run in \u003c 30 seconds\n\n## Notes\n- Initially use warnings only, enforce after team adjusts\n- WASM baseline needs calibration after first build\n- Consider using `lint-staged` to only check changed files\n- Husky install should run in `postinstall` for new contributors","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T19:48:30.932275+01:00","updated_at":"2025-12-27T21:03:06.082125+01:00","closed_at":"2025-12-27T21:03:06.082125+01:00","close_reason":"Closed"}
{"id":"Battlesim2-tu9","title":"Add integration scenario tests for D\u0026D 5e mechanics","description":"## Overview\nAdd integration tests using real D\u0026D 5e encounter scenarios to validate simulation logic and catch emergent bugs that unit tests miss.\n\n## Why This Matters\n- **Regression protection**: Detect when logic changes break expected behavior\n- **Emergent bugs**: Catch issues from system interactions (actions + resources + reactions)\n- **Living documentation**: Scenarios document expected D\u0026D 5e behavior\n- **Refactoring safety**: Improve code with confidence tests pass\n\n## Implementation Phases\n\n### Phase 1: Framework\n- Create `tests/scenarios/` directory structure\n- Write `integration_test.rs` test runner\n- Create `invariants.rs` with assertion helpers\n\n### Phase 2: Basic Mechanical Scenarios\n- 01_single_attack.json - Basic attack resolution\n- 02_fireball_aoe.json - AOE damage calculation\n- 03_healing_word.json - Bonus action spell\n- 04_concentration_check.json - Concentration mechanics\n- 05_multiattack.json - Multiple attacks per action\n\n### Phase 3: Complex Encounters\n- goblin_bandits.json - Multi-combatant combat\n- Resource management scenarios\n- Edge cases (temp HP, resistance, death saves)\n\n## Assertion Strategy\nAssert BEHAVIORS, not exact outcomes:\n- No negative HP or resources\n- Damage dealt = damage taken (energy conserved)\n- Action economy respected (1 action/turn max)\n- Event sequence validity\n- Concentration mechanics work correctly\n\n## Directory Structure\n```\nsimulation-wasm/tests/\n‚îú‚îÄ‚îÄ scenarios/\n‚îÇ   ‚îú‚îÄ‚îÄ basic/\n‚îÇ   ‚îú‚îÄ‚îÄ edge_cases/\n‚îÇ   ‚îî‚îÄ‚îÄ complex/\n‚îú‚îÄ‚îÄ integration_test.rs\n‚îî‚îÄ‚îÄ invariants.rs\n```\n\n## Dependencies\nShould be done AFTER:\n- Battlesim2-61w: Fix Rust warnings\n- Battlesim2-dxt: Improve test coverage\n\n## Notes\n- Scenarios use existing AdventuringDaySchema JSON format\n- User creates realistic encounters via UI, exports to JSON\n- Tests automatically validate all scenarios in directory","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T10:44:50.480731+01:00","updated_at":"2025-12-27T13:59:08.870784+01:00","closed_at":"2025-12-27T13:59:08.870784+01:00","close_reason":"Closed"}
{"id":"Battlesim2-wpt","title":"Implement AI Action Diagnostics in combat log","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:29:55.422859+01:00","updated_at":"2025-12-26T22:43:30.717651+01:00","closed_at":"2025-12-26T22:43:30.717651+01:00","close_reason":"Integrated skipped action diagnostics with UI warning states.","labels":["backend"],"dependencies":[{"issue_id":"Battlesim2-wpt","depends_on_id":"Battlesim2-1h0","type":"parent-child","created_at":"2025-12-26T18:30:50.865678+01:00","created_by":"daemon"}]}
